<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Reactive</title>
    <script src="../node_modules/rx/dist/rx.all.js"></script>
    <!--<script src="../dist/flow.js"></script>-->
    <!--<script src="libs/lodash.min.3.10.0.js"></script>-->
    <!--<script src="libs/immutable.3.7.4.js"></script>-->
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.0/lodash.js" type="text/javascript"></script>-->
    <script type="text/javascript">

        console.log( new Rx.Observer() );

        var subject = new Rx.Subject();
        var subject2 = new Rx.Subject(
                function(x){
                    console.log('subject2 onNext', x);
                },
                function(){
                    console.log('subjec2 onCompleted');
                },
                function( error ){
                    console.log('subject2 onError', error );
                }
        );
        var watcher = subject.subscribe(
                function(x){
                    console.log('watcher onNext', x);
                },
                function(){
                    console.log('watcher onCompleted');
                },
                function( error ){
                    console.log('watcher onError', error );
                }
        );
        console.log('WATCHER: ', watcher );
//        subject.multicast( subject2 );
//       subject.multicast( subject2, function( e ){
//            console.log('ever');
//            return e instanceof Date;
//        });

        setTimeout(function(){
            subject.onNext( new Date() );
        }, 2000);

//        var watcher = new Rx.Subject(
//                function(x){
//                    console.log('1 onNext', x);
//                },
//                function(){
//                    console.log('1 onCompleted');
//                },
//                function( error ){
//                    console.log('1 onError', error );
//                }
//        );
//        var sub = subject.filter(function( e ){
//            return true;
//        } ).subscribe( watcher );
//        console.log( sub, subject );
////        var count = 0;
//        setInterval(function(){
//            subject.onNext( new Date() );
//        }, 2000);
//        var watcher2;
//        setTimeout( function(){
//            watcher2 = subject.subscribe(
//                    function(x){
//                        console.log('2 onNext', x );
//                    },
//                    function(){
//                        console.log('2 onCompleted');
//                    },
//                    function( error ){
//                        console.log('2 onError', error );
//                    }
//            );
//        }, 6000 )
//        setTimeout( function(){
//            watcher2.dispose();
//        }, 7000 )

//

    </script>

</body>
</html>
